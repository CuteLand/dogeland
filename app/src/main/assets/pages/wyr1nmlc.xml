<?xml version="1.0" encoding="UTF-8" ?>
<!-- SettingsPage -->
  <page>
 <group title="基础">
     <action>
         <title>Rootfs</title>
             <param name="Input" label="" title="" placeholder="/data/data/me.flytree.dogeland/files/linux/" type="text" />
            <set>$TOOLKIT/app-addon/set_all.sh set_rootfsdir</set>
             </action>
        <action>
            <title>初始化命令行</title>
            <param name="Input" label="" title="" placeholder="/bin/sh" type="text" />
            <set>$TOOLKIT/app-addon/set_all.sh set_initcmd</set>
        </action>
          <action>
            <title>LinuxAddon启动设置</title>
             <param name="type">
                <option value="/bin/sh /dogeland/cli.sh sshd_start">启动openssh-sshd</option>
                <option value="/bin/sh /dogeland/cli.sh dropbear_start">启动dropbear</option>
                <option value="/bin/sh /dogeland/cli.sh vncserver_start">启动vncserver</option>
            </param>
            <set>
            rm -rf $CONFIG_DIR/cmd.conf
            echo "$type">$CONFIG_DIR/cmd.conf
            </set>
             </action>
          </group>
       <group title="进阶">
         <action bg-task="true">
            <title>开启后台锁定</title>
            <desc>保持应用前台运行和CPU唤醒,防止容器卡顿或被杀死</desc>
            <set>sleep 9999</set>
        </action>
        <action>
            <title>备份Rootfs</title>
             <param name="dir" type="folder" value="/sdcard/Android/data/me.flytree.dogeland/" editable="true"/>
            <set>$TOOLKIT/cli.sh backup_rootfs</set>
        </action>
        <action>
            <title>检查运行环境</title>
            <set>$TOOLKIT/app-addon/env_info.sh</set>
        </action>
              <action>
            <title>设置系统架构</title>
            <desc>系统不存在uname命令或无法正确检测,请使用此选项</desc>
             <param name="type">
                <option value="arm">arm</option>
                <option value="arm64">arm64</option>
                <option value="x86">x86</option>
                 <option value="x86_64">x86_64</option>
            </param>
            <set>
            sed "24c export platform=$type" $START_DIR/shell_init.sh
            rm $TOOLKIT/install_bin_done
            if [[ -f "$TMPDIR/install_bin.shbak" ]]; then
             . $TMPDIR/install_bin.shbak
            fi
            if [[ -f "$TOOLKIT/install_bin.sh" ]]; then
            . $TOOLKIT/install_bin.sh
            fi
            </set>
             </action>
           </group>
           <group title="高级">
             <action>
            <title>移除已安装Rootfs</title>
             <param name="type">
                <option value="">取消还是</option>
                <option value="del_rootfs">确定删除(将永远消失!)</option>
            </param>
            <set>$TOOLKIT/cli.sh $type</set>
        </action>
          
        <action>
            <title>设置自定义 PATH 环境</title>
            <param name="Input" label="" title="" placeholder="/bin:/usr/sbin(留空关闭)" type="text" />
            <set>
            echo "$Input">$DATA2_DIR/custom_path.conf
            if [[ "$Input" != "" ]]
            then
            echo "">/dev/null
            else
            rm -rf $DATA2_DIR/custom_path.conf
            fi
            </set>
        </action>
         <action>
            <title>开启QEMU-USER支持</title>
              <param name="qemu">
                <option value="x86_64">qemu-x86_64</option>
                <option value="x86">qemu-i386</option>
                <option value="arm_64">qemu-aarch64</option>
                <option value="arm">qemu-arm</option>
                <option value="0">关闭</option>
            </param>
            <set>$TOOLKIT/cli.sh set_emulator_qemu</set>
        </action>
    </group>
    <group title="PRoot">
    <action>
            <title>Enable FakeKernel</title>
             <param name="kernel" label="" title="" placeholder="5.4.0-fakehost(留空关闭)" type="text" />
            <set>$TOOLKIT/cli.sh enable_proot_fakekernel</set>
        </action>
    </group>
    
     <group title="Other">
            <action>
            <title>修改 GNU / Linux 系统密码</title>
            <param name="username" label="" title="用户名" placeholder="" type="text" />
            <param name="password" label="" title="密码" placeholder="" type="text" />
            <set>$TOOLKIT/cli.sh edit_passwd</set>
        </action>
          <action>
            <title>修复运行环境权限</title>
            <set>chmod -R 0777 $TOOLKIT/*</set>
        </action>
        <action>
            <title>关闭App</title>
            <set>
            $TOOLKIT/proot -r $START_DIR -b /system -b /proc -b /sys /bin/pkill $PACKAGE_NAME
            pkill me.flytree.dogeland
            </set>
        </action>
    </group>
     <group title="关于">
            <action>
            <title>给app评价</title>
            <desc>如果觉得好用,可给个star~</desc>
            <set>am start --user 0 -a android.intent.action.VIEW -d https://github.com/dogelands/dogeland.git</set>
        </action>
          <action>
            <title>版本</title>
            <desc>dogeland 1.3.6_2</desc>
             <set>echo "Thanks..."</set>
        </action>
    </group>
    </page>